{"version":3,"sources":["webpack:///./src/components/feature/BookAdd.vue?59ac","webpack:///src/components/feature/BookAdd.vue","webpack:///./src/components/feature/BookAdd.vue?9efb","webpack:///./src/components/feature/BookAdd.vue","webpack:///./src/components/feature/BookAdd.vue?68ff"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticClass","on","$event","preventDefault","addBook","directives","name","rawName","value","form","expression","domProps","target","composing","$set","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","_l","genre","index","key","_s","author","_id","ref","handleUpload","deleteImg","_e","success","error","staticRenderFns","data","authors","genres","loading","description","author_id","photo","formError","methods","img","src","URL","createObjectURL","$refs","file","files","onload","revokeObjectURL","validation","computed","component"],"mappings":"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","file":"js/chunk-7e1be2b3.1ce8cec5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"add\"}},[_c('h1',[_vm._v(\"Add Book\")]),_c('hr'),(_vm.loading)?_c('h2',{staticClass:\"mt-5 display-4 text-center\"},[_vm._v(\"Please wait a seconds...\")]):_c('div',[_c('h3',[_vm._v(\"You can add your book here!\")]),_c('form',{staticClass:\"form-add\",attrs:{\"action\":\"\",\"enctype\":\"multipart/form-data\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.addBook($event)}}},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Book Title\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.name),expression:\"form.name\"}],attrs:{\"type\":\"text\",\"name\":\"\",\"id\":\"name\"},domProps:{\"value\":(_vm.form.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"name\", $event.target.value)}}}),_c('label',{attrs:{\"for\":\"genre\"}},[_vm._v(\"Genre\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.genre),expression:\"form.genre\"}],attrs:{\"name\":\"genre\",\"id\":\"genre\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"genre\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.genres),function(genre,index){return _c('option',{key:index,domProps:{\"value\":genre.name}},[_vm._v(_vm._s(genre.name))])}),0),_c('label',{attrs:{\"for\":\"author\"}},[_vm._v(\"Author\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.author_id),expression:\"form.author_id\"}],attrs:{\"id\":\"author\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"author_id\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.authors),function(author,index){return _c('option',{key:index,attrs:{\"id\":\"author\"},domProps:{\"value\":author._id}},[_vm._v(_vm._s(author.name))])}),0),_c('label',{attrs:{\"for\":\"image\"}},[_vm._v(\"Book Image\")]),_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"id\":\"image\"},on:{\"change\":_vm.handleUpload}}),_c('img',{attrs:{\"id\":\"output-img\"}}),(_vm.form.photo)?_c('p',{staticClass:\"btn btn-danger w-25\",attrs:{\"id\":\"delete\"},on:{\"click\":_vm.deleteImg}},[_vm._v(\"Delete\")]):_vm._e(),_c('label',{attrs:{\"for\":\"genre\"}},[_vm._v(\"Description\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.description),expression:\"form.description\"}],attrs:{\"cols\":\"20\",\"rows\":\"3\"},domProps:{\"value\":(_vm.form.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"description\", $event.target.value)}}}),(_vm.success)?_c('h3',{staticClass:\"text-success\"},[_vm._v(_vm._s(_vm.success))]):_vm._e(),(_vm.error)?_c('h3',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('input',{staticClass:\"btn-submit\",attrs:{\"type\":\"submit\",\"value\":\"Submit\"}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"add\">\r\n    <h1>Add Book</h1>\r\n    <hr />\r\n    <h2 class=\"mt-5 display-4 text-center\" v-if=\"loading\">Please wait a seconds...</h2>\r\n    <div v-else>\r\n      <h3>You can add your book here!</h3>\r\n      <form action @submit.prevent=\"addBook\" class=\"form-add\" enctype=\"multipart/form-data\">\r\n        <label for=\"name\">Book Title</label>\r\n        <input type=\"text\" v-model=\"form.name\" name id=\"name\" />\r\n        <label for=\"genre\">Genre</label>\r\n        <select name=\"genre\" v-model=\"form.genre\" id=\"genre\">\r\n          <option v-for=\"(genre,index) in genres\" :key=\"index\" :value=\"genre.name\">{{ genre.name }}</option>\r\n        </select>\r\n        <label for=\"author\">Author</label>\r\n        <select id=\"author\" v-model=\"form.author_id\">\r\n          <option\r\n            v-for=\"(author,index) in authors\"\r\n            id=\"author\"\r\n            :key=\"index\"\r\n            :value=\"author._id\"\r\n          >{{ author.name }}</option>\r\n        </select>\r\n        <label for=\"image\">Book Image</label>\r\n        <input type=\"file\" ref=\"file\" @change=\"handleUpload\" id=\"image\" />\r\n        <img id=\"output-img\" />\r\n        <p v-if=\"form.photo\" class=\"btn btn-danger w-25\" id=\"delete\" @click=\"deleteImg\">Delete</p>\r\n        <label for=\"genre\">Description</label>\r\n        <textarea v-model=\"form.description\" cols=\"20\" rows=\"3\"></textarea>\r\n        <h3 class=\"text-success\" v-if=\"success\">{{ success }}</h3>\r\n        <h3 class=\"text-danger\" v-if=\"error\">{{ error }}</h3>\r\n        <input type=\"submit\" class=\"btn-submit\" value=\"Submit\" />\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { QUERY_AUTHORS, QUERY_GENRES } from \"@/graphql/query\";\r\nimport { ADD_BOOK } from \"@/graphql/mutations\";\r\nimport { mapState } from \"vuex\";\r\nexport default {\r\n  name: \"bookAdd\",\r\n  data() {\r\n    return {\r\n      authors: [],\r\n      genres: [],\r\n      loading: false,\r\n      success: false,\r\n      error: false,\r\n      form: {\r\n        name: \"\",\r\n        genre: \"\",\r\n        description: \"\",\r\n        author_id: \"\",\r\n        photo: \"\",\r\n      },\r\n      formError: {\r\n        name: \"\",\r\n        genre: \"\",\r\n      },\r\n    };\r\n  },\r\n  async mounted() {\r\n    this.loading = true;\r\n    try {\r\n      // Query for authors data\r\n      const {\r\n        data: { authors },\r\n      } = await this.$apollo.query({\r\n        query: QUERY_AUTHORS,\r\n      });\r\n      this.authors = authors;\r\n      //  Query for genre data\r\n      const {\r\n        data: { genres },\r\n      } = await this.$apollo.query({\r\n        query: QUERY_GENRES,\r\n      });\r\n      this.genres = genres;\r\n      return setTimeout(() => {\r\n        this.loading = false;\r\n      }, 500);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  },\r\n  methods: {\r\n    async addBook() {\r\n      const { error } = this.validation;\r\n      if (error) return (this.error = error);\r\n      try {\r\n        await this.$apollo.mutate({\r\n          mutation: ADD_BOOK,\r\n          variables: { ...this.form, user_add: this.user.username },\r\n          hasUpload: true,\r\n        });\r\n        this.error = false;\r\n        this.success = \"Your book successfully added\";\r\n      } catch ({ message }) {\r\n        this.error = message;\r\n        this.success = false;\r\n      }\r\n    },\r\n    handleUpload() {\r\n      // Make review img\r\n      const img = document.getElementById(\"output-img\");\r\n      img.src = URL.createObjectURL(this.$refs.file.files[0]);\r\n      img.onload = () => {\r\n        URL.revokeObjectURL(img.src);\r\n      };\r\n      this.form.photo = this.$refs.file.files[0];\r\n    },\r\n    deleteImg() {\r\n      // Delete file from variable\r\n      this.form.photo = false;\r\n      // Delete url image\r\n      const img = document.getElementById(\"output-img\");\r\n      img.src = \"\";\r\n    },\r\n    validation() {\r\n      const name = this.form.name;\r\n      const genre = this.form.genre;\r\n      if (!name) {\r\n        return { error: \"Name required\" };\r\n      } else if (!genre) {\r\n        return { error: \"Genre required\" };\r\n      } else {\r\n        return { success: true };\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState([\"user\"]),\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"~@/assets/scss/_variables.scss\";\r\n@import \"~@/assets/scss/_mixins.scss\";\r\n\r\n#add {\r\n  padding: 3rem;\r\n  min-height: 120vh;\r\n  h1 {\r\n    font-size: $title-md;\r\n  }\r\n\r\n  hr {\r\n    border: $color-border-gray;\r\n  }\r\n\r\n  h3 {\r\n    text-align: left;\r\n    margin-top: 3rem;\r\n  }\r\n\r\n  .form-add {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: left;\r\n    text-align: left;\r\n    margin-top: 3rem;\r\n\r\n    input,\r\n    textarea,\r\n    select {\r\n      width: 60%;\r\n      border-radius: 1rem;\r\n      border: none;\r\n      padding: 0.5rem 1rem;\r\n      margin-bottom: 1rem;\r\n      @include respond(small) {\r\n        width: 100%;\r\n      }\r\n    }\r\n\r\n    label {\r\n      font-size: $title-sm;\r\n    }\r\n\r\n    input:focus,\r\n    textarea:focus,\r\n    select:focus {\r\n      outline: none;\r\n    }\r\n\r\n    #output-img {\r\n      max-width: 200px;\r\n      max-height: 200px;\r\n      margin-bottom: 2rem;\r\n    }\r\n\r\n    #delete {\r\n      cursor: pointer;\r\n    }\r\n\r\n    .btn-submit {\r\n      width: 40%;\r\n      background-color: $primary-color-md;\r\n      color: white;\r\n      margin-top: 2rem;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BookAdd.vue?vue&type=template&id=68a229cc&scoped=true&\"\nimport script from \"./BookAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./BookAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BookAdd.vue?vue&type=style&index=0&id=68a229cc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68a229cc\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookAdd.vue?vue&type=style&index=0&id=68a229cc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookAdd.vue?vue&type=style&index=0&id=68a229cc&lang=scss&scoped=true&\""],"sourceRoot":""}