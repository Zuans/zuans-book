{"version":3,"sources":["webpack:///./src/components/feature/BookAdd.vue?2d5d","webpack:///./src/components/feature/BookAdd.vue?e861","webpack:///src/components/feature/BookAdd.vue","webpack:///./src/components/feature/BookAdd.vue?9efb","webpack:///./src/components/feature/BookAdd.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","loading","staticClass","on","$event","preventDefault","addBook","directives","name","rawName","value","form","expression","domProps","target","composing","$set","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","_l","genre","index","key","_s","author","_id","ref","handleUpload","deleteImg","_e","success","error","staticRenderFns","data","authors","genres","description","author_id","photo","formError","inject","methods","img","src","URL","createObjectURL","$refs","file","files","onload","revokeObjectURL","validation","clearForm","computed","component"],"mappings":"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","file":"js/chunk-1204608e.4f819e24.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookAdd.vue?vue&type=style&index=0&id=28e98caa&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookAdd.vue?vue&type=style&index=0&id=28e98caa&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"add\"}},[_c('h1',[_vm._v(\"Add Book\")]),_c('hr'),(_vm.loading.value)?_c('h2',{staticClass:\"mt-5 display-4 text-center\"},[_vm._v(\"Please wait a seconds...\")]):_c('div',[_c('h3',[_vm._v(\"You can add your book here!\")]),_c('form',{staticClass:\"form-add\",attrs:{\"action\":\"\",\"enctype\":\"multipart/form-data\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.addBook($event)}}},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Book Title\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.name),expression:\"form.name\"}],attrs:{\"type\":\"text\",\"name\":\"\",\"id\":\"name\"},domProps:{\"value\":(_vm.form.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"name\", $event.target.value)}}}),_c('label',{attrs:{\"for\":\"genre\"}},[_vm._v(\"Genre\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.genre),expression:\"form.genre\"}],attrs:{\"name\":\"genre\",\"id\":\"genre\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"genre\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.genres),function(genre,index){return _c('option',{key:index,domProps:{\"value\":genre.name}},[_vm._v(_vm._s(genre.name)+\" \")])}),0),_c('label',{attrs:{\"for\":\"author\"}},[_vm._v(\"Author\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.author_id),expression:\"form.author_id\"}],attrs:{\"id\":\"author\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.form, \"author_id\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.authors),function(author,index){return _c('option',{key:index,attrs:{\"id\":\"author\"},domProps:{\"value\":author._id}},[_vm._v(_vm._s(author.name))])}),0),_c('label',{attrs:{\"for\":\"image\"}},[_vm._v(\"Book Image\")]),_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"id\":\"image\"},on:{\"change\":_vm.handleUpload}}),_c('img',{attrs:{\"id\":\"output-img\"}}),(_vm.form.photo)?_c('p',{staticClass:\"btn btn-danger w-25\",attrs:{\"id\":\"delete\"},on:{\"click\":_vm.deleteImg}},[_vm._v(\"Delete \")]):_vm._e(),_c('label',{attrs:{\"for\":\"genre\"}},[_vm._v(\"Description\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.description),expression:\"form.description\"}],attrs:{\"cols\":\"20\",\"rows\":\"3\"},domProps:{\"value\":(_vm.form.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"description\", $event.target.value)}}}),(_vm.success)?_c('h3',{staticClass:\"text-success\"},[_vm._v(_vm._s(_vm.success))]):_vm._e(),(_vm.error)?_c('h4',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('input',{staticClass:\"btn-submit\",attrs:{\"type\":\"submit\",\"value\":\"Submit\"}})])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"add\">\n    <h1>Add Book</h1>\n    <hr />\n    <h2 class=\"mt-5 display-4 text-center\" v-if=\"loading.value\">Please wait a seconds...</h2>\n    <div v-else>\n      <h3>You can add your book here!</h3>\n      <form \n        action \n        @submit.prevent=\"addBook\" \n        class=\"form-add\" \n        enctype=\"multipart/form-data\"\n      >\n        <label for=\"name\">Book Title</label>\n        <input type=\"text\" v-model=\"form.name\" name id=\"name\" />\n        <label for=\"genre\">Genre</label>\n        <select name=\"genre\" v-model=\"form.genre\" id=\"genre\">\n          <option \n            v-for=\"(genre,index) in genres\" \n            :key=\"index\" \n            :value=\"genre.name\"\n          >{{ genre.name }}\n          </option>\n        </select>\n        <label for=\"author\">Author</label>\n        <select id=\"author\" v-model=\"form.author_id\">\n          <option\n            v-for=\"(author,index) in authors\"\n            id=\"author\"\n            :key=\"index\"\n            :value=\"author._id\"\n          >{{ author.name }}</option>\n        </select>\n        <label for=\"image\">Book Image</label>\n        <input type=\"file\" ref=\"file\" @change=\"handleUpload\" id=\"image\" />\n        <img id=\"output-img\" />\n        <p \n          v-if=\"form.photo\" \n          class=\"btn btn-danger w-25\" \n          id=\"delete\" \n          @click=\"deleteImg\"\n        >Delete\n        </p>\n        <label for=\"genre\">Description</label>\n        <textarea \n          v-model=\"form.description\" \n          cols=\"20\" \n          rows=\"3\"\n        ></textarea>\n        <h3 class=\"text-success\" v-if=\"success\">{{ success }}</h3>\n        <h4 class=\"text-danger\" v-if=\"error\">{{ error }}</h4>\n        <input type=\"submit\" class=\"btn-submit\" value=\"Submit\" />\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { QUERY_AUTHORS, QUERY_GENRES } from \"@/graphql/query\"\nimport  { addBook } from \"@/utils/index\"\nimport { mapState, mapActions } from \"vuex\";\n\nexport default {\n  name: \"bookAdd\",\n  data() {\n    return {\n      authors: [],\n      genres: [],\n      success: false,\n      error: false,\n      form: {\n        name: \"\",\n        genre: \"\",\n        description: \"\",\n        author_id: \"\",\n        photo: \"\",\n      },\n      formError: {\n        name: \"\",\n        genre: \"\",\n      },\n    };\n  },\n  inject : ['loading'],\n  async mounted() {\n    this.loading.value = true;\n    try {\n      // Query for authors data\n      const {\n        data: { authors },\n      } = await this.$apollo.query({\n        query: QUERY_AUTHORS,\n      });\n      this.authors = authors;\n      //  Query for genre data\n      const {\n        data: { genres },\n      } = await this.$apollo.query({\n        query: QUERY_GENRES,\n      });\n      this.genres = genres;\n      return setTimeout(() => {\n        this.loading.value = false;\n      }, 500);\n    } catch (error) {\n      console.error(error);\n    }\n  },\n  methods: {\n    ...mapActions(['setImgDefault']),\n    async addBook() {\n      const { error } = this.validation();\n      if (error) return (this.error = error);\n      console.log('Add book function trigger');\n      try {\n        this.loading.value = true;\n        const result = await addBook({ ...this.form, user_add: this.user.username });\n        console.log(result);\n        this.error = false;\n        setTimeout(() => {\n          this.loading.value = false;\n          this.clearForm();\n          this.success = \"Your book successfully added\";\n        },1000)\n      } catch ({ message }) {\n        this.error = message;\n        this.success = false;\n        this.loading.value = false;\n      }\n    },\n    handleUpload() {\n      // Make review img\n      const img = document.getElementById(\"output-img\");\n      img.src = URL.createObjectURL(this.$refs.file.files[0]);\n      img.onload = () => {\n        URL.revokeObjectURL(img.src);\n      };\n      this.form.photo = this.$refs.file.files[0];\n    },\n    deleteImg() {\n      // Delete file from variable\n      this.form.photo = false;\n      // Delete url image\n      const img = document.getElementById(\"output-img\");\n      img.src = \"\";\n    },\n    validation() {\n      const name = this.form.name;\n      const genre = this.form.genre;\n      if (!name || name == \" \" ) {\n        return { error: \"Name required\" };\n      } else if (!genre || genre == \" \") {\n        return { error: \"Genre required\" };\n      } else {\n        return { success: true };\n      }\n    },\n    clearForm() {\n      this.form = {\n        name: \"\",\n        genre: \"\",\n        description: \"\",\n        author_id: \"\",\n        photo: \"\",\n      }\n    }\n  },\n  computed: {\n    ...mapState([\"user\"]),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"~@/assets/scss/_variables.scss\";\n@import \"~@/assets/scss/_mixins.scss\";\n\n#add {\n  padding: 3rem;\n  min-height: 120vh;\n  h1 {\n    font-size: $title-md;\n  }\n\n  hr {\n    border: $color-border-gray;\n  }\n\n  h3 {\n    text-align: left;\n    margin-top: 3rem;\n  }\n\n  .form-add {\n    display: flex;\n    flex-direction: column;\n    justify-content: left;\n    text-align: left;\n    margin-top: 3rem;\n\n    input,\n    textarea,\n    select {\n      width: 60%;\n      border-radius: 1rem;\n      border: none;\n      padding: 0.5rem 1rem;\n      margin-bottom: 1rem;\n      background-color : white;\n      @include respond(small) {\n        width: 100%;\n      }\n    }\n\n    label {\n      font-size: $title-sm;\n    }\n\n    input:focus,\n    textarea:focus,\n    select:focus {\n      outline: none;\n    }\n\n    #output-img {\n      max-width: 200px;\n      max-height: 200px;\n      margin-bottom: 2rem;\n    }\n\n    #delete {\n      cursor: pointer;\n    }\n\n    .btn-submit {\n      width: 40%;\n      background-color: $primary-color-md;\n      color: white;\n      margin-top: 2rem;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BookAdd.vue?vue&type=template&id=28e98caa&scoped=true&\"\nimport script from \"./BookAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./BookAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BookAdd.vue?vue&type=style&index=0&id=28e98caa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28e98caa\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}