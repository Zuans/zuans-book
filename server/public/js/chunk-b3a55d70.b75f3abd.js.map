{"version":3,"sources":["webpack:///./src/components/feature/BookDetail.vue?2e12","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/assets/img/card-1.jpg","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/components/feature/BookDetail.vue?904e","webpack:///src/components/feature/BookDetail.vue","webpack:///./src/components/feature/BookDetail.vue?013f","webpack:///./src/components/feature/BookDetail.vue"],"names":["$","$find","find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","Array","target","proto","forced","callbackfn","this","arguments","length","undefined","module","exports","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","bookImg","_v","_s","titleBook","class","pink","isLiked","on","$event","toggle","book","_id","author","genre","setDate","user_add","description","_e","staticRenderFns","name","data","month","imgDefault","likedBook","methods","setLiked","id","watch","computed","filename","toUpperCase","component"],"mappings":"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","file":"js/chunk-b3a55d70.b75f3abd.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookDetail.vue?vue&type=style&index=0&id=1e4ba6ff&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookDetail.vue?vue&type=style&index=0&id=1e4ba6ff&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","module.exports = __webpack_public_path__ + \"img/card-1.e7842bf2.jpg\";","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-detail\"},[_c('img',{staticClass:\"img-overlay\",attrs:{\"src\":_vm.bookImg,\"alt\":\"\"}}),_c('div',{staticClass:\"book-detail-body\"},[_c('h3',[_vm._v(_vm._s(_vm.titleBook))]),_c('hr'),_c('div',{staticClass:\"book-content\"},[_c('font-awesome',{staticClass:\"icon\",class:{ pink : _vm.isLiked },attrs:{\"icon\":\"heart\"},on:{\"click\":function($event){return _vm.toggle('isLiked',_vm.book._id)}}}),(_vm.book)?_c('div',[_c('p',[_vm._v(\"Author : \"+_vm._s(_vm.book.author ? (\" \" + (_vm.book.author.name)) : null))]),_c('p',[_vm._v(\"Genre : \"+_vm._s(_vm.book.genre ? (\" \" + (_vm.book.genre)) : null))]),_c('p',[_vm._v(\"Release Date : \"+_vm._s(_vm.setDate))]),_c('p',[_vm._v(\"Added By: \"+_vm._s(_vm.book.user_add ? _vm.book.user_add : \"Anonymous\"))]),_c('p',[_vm._v(\"Description :\"+_vm._s(_vm.book.description ? (\" \" + (_vm.book.description)) : \" This book doens't have description \"))])]):_vm._e()],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"book-detail\">\n    <img class=\"img-overlay\" :src=\"bookImg\" alt />\n    <div class=\"book-detail-body\">\n      <h3>{{ titleBook }}</h3>\n      <hr />\n      <div class=\"book-content\">\n        <font-awesome\n          icon=\"heart\"\n          @click=\"toggle('isLiked',book._id)\"\n          class=\"icon\"\n          :class=\"{ pink : isLiked }\"\n        ></font-awesome>\n        <div v-if=\"book\" >\n          <p>Author : {{ book.author ? ` ${book.author.name}` : null }}</p>\n          <p>Genre : {{ book.genre ? ` ${book.genre}` : null }}</p>\n          <p>Release Date : {{ setDate }}</p>\n          <p>Added By: {{ book.user_add ? book.user_add : \"Anonymous\" }}</p>\n          <p>Description :{{ book.description ? ` ${book.description}` : \" This book doens't have description \"}}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { QUERY_BOOK } from \"@/graphql/query\";\nimport { LIKED_BOOK, UNLIKED_BOOK } from \"@/graphql/mutations\";\nimport { mapState, mapGetters } from \"vuex\";\n\nexport default {\n  name: \"bookDetail\",\n  data() {\n    return {\n      book: \"\",\n      month: [\n        \"January\",\n        \"February\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"Desember\",\n      ],\n      imgDefault: require(\"@/assets/img/card-1.jpg\"),\n      isLiked: false,\n      likedBook: [],\n    };\n  },\n  async created() {\n    const id = this.$route.params.bookId;\n    try {\n      const {\n        data: { book },\n      } = await this.$apollo.query({\n        query: QUERY_BOOK,\n        variables: {\n          id: id,\n        },\n      });\n      this.book = book;\n    } catch (error) {\n      console.log(error);\n    }\n    const { likedBook } = this.user;\n    this.setLiked(likedBook);\n  },\n  methods: {\n    async toggle(value, bookId) {\n      // Toogle the isLiked value\n      this[value] = !this[value];\n      try {\n        // If user hit love icon and isliked is false !\n        if (this.isLiked) {\n          console.log('tambah')\n          const data = await this.$apollo.mutate({\n            mutation: LIKED_BOOK,\n            variables: {\n              bookId,\n            },\n          });\n          return data;\n        } else {\n          // If user hit love icon and isLIked is true\n          console.log('hapus');\n          const data = await this.$apollo.mutate({\n            mutation: UNLIKED_BOOK,\n            variables: {\n              bookId,\n            },\n          });\n          this.$router.go(-1);\n          return data;\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    setLiked(books) {\n      const  id = this.$route.params.bookId;\n      const isLiked = books.find(book => {\n        if (!book) return;\n        return book._id == id;\n      });\n      if(isLiked) return this.isLiked = true;\n      return this.isLiked = false;\n    }\n  },\n  watch: {\n    // user(val) {\n    //   console.log(val);\n    //   const id = this.$route.params.bookId;\n    //   const { likedBook } = val;\n    //   const isLiked = likedBook.findIndex( book => {\n    //       book ? book._id == id : false ;\n    //     });\n    //   console.log(isLiked);\n    // }\n  },\n  computed: {\n    ...mapState([\"user\"]),\n    ...mapGetters([\"getLikedBook\"]),\n    bookImg() {\n      if (this.book) {\n        const { filename } = this.book.photo;\n        return filename\n          ? `/img-card/${filename}`\n          : this.imgDefault;\n      }\n      return null;\n    },\n    titleBook() {\n      if (this.book) {\n        return this.book.name.toUpperCase();\n      }\n      return null;\n    },\n    setDate() {\n      if (this.book) {\n        const d = new Date(this.book.date);\n        const date = d.getDate();\n        const indexMonth = d.getMonth();\n        const fullYear = d.getFullYear();\n        return `${date}-${this.month[indexMonth]}-${fullYear}`;\n      }\n      return null;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"~@/assets/scss/_variables.scss\";\n@import \"~@/assets/scss/_mixins.scss\";\n\n.img-overlay {\n  width: 100%;\n  max-height: 550px;\n  top: 0;\n  left: 0;\n}\n\n.book-detail-body {\n  padding: 5rem 3rem;\n  position: relative;\n  height: 50vh;\n  min-height: 600px;\n  background-color: #127265;\n  color: white;\n\n  hr {\n    border: $color-border-white;\n    margin-top: 2rem;\n  }\n  .book-content {\n    height: 100%;\n    width: 100%;\n    text-align: left;\n    padding: 3rem 2rem;\n    @include respond(small) {\n      padding: 1rem;\n    }\n    p {\n      font-size: 1.5rem;\n      @include respond(small) {\n        font-size: 1.2rem;\n      }\n    }\n\n    .icon {\n      font-size: 3.8rem;\n      cursor: pointer;\n      float: right;\n      @include respond(small) {\n        font-size: 3rem;\n      }\n    }\n  }\n}\n\n.pink {\n  color: rgb(189, 27, 81);\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BookDetail.vue?vue&type=template&id=1e4ba6ff&scoped=true&\"\nimport script from \"./BookDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./BookDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BookDetail.vue?vue&type=style&index=0&id=1e4ba6ff&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e4ba6ff\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}